## ğŸ“ Project Structure Rules

### Root Layout
```
atlas-world-svc/
â”œâ”€â”€ .cursor/
â”‚   â”œâ”€â”€ plans/           # Implementation plans
â”‚   â””â”€â”€ rules/           # Development rules
â”œâ”€â”€ modules/ts/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts     # Module registration
â”‚   â”‚   â”œâ”€â”€ matches/     # Match handlers
â”‚   â”‚   â”œâ”€â”€ physics/     # Physics systems
â”‚   â”‚   â”œâ”€â”€ net/         # Networking layer
â”‚   â”‚   â”œâ”€â”€ systems/     # Game systems
â”‚   â”‚   â”œâ”€â”€ events/      # Event handling
â”‚   â”‚   â””â”€â”€ metrics/     # Observability
â”‚   â”œâ”€â”€ tests/           # Test files
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ local.yml           # Nakama config
â””â”€â”€ server_spec.md      # Technical spec
```

### Module Organization
- **matches/**: Match lifecycle, state management
- **physics/**: Planck.js worlds, bodies, collisions
- **net/**: AOI, codec, transport layer
- **systems/**: Movement, AI, AoE, portals
- **events/**: Reliable events, broadcasting
- **metrics/**: Prometheus integration

### File Naming
- **Handlers**: `{feature}Handler.ts`
- **Managers**: `{feature}Manager.ts`
- **Systems**: `{feature}System.ts`
- **Utils**: `{feature}Utils.ts`
- **Types**: `{feature}Types.ts`

### Import Structure
- **Relative imports** within modules
- **Absolute imports** from index files
- **Barrel exports** for clean APIs
- **No circular dependencies**

### Configuration Management
- **Environment variables** for secrets
- **Static config** files for game constants
- **Runtime config** validation
- **Hot reload** support for development