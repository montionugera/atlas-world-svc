## ðŸš€ Development Workflow Rules

### Branch Strategy
- **main**: Production-ready, always deployable
- **feature/**: New features, fixes, docs
- **hotfix/**: Urgent production fixes

### Commit Policy
- Keep messages short, no newlines or special chars
- Example: `feat: add player movement prediction`
- Use conventional commits: `feat:`, `fix:`, `docs:`, `refactor:`

### PR Requirements
- **Required**: Pass all CI checks
- **Required**: At least one review approval
- **Required**: Squash merge only
- **Required**: Clean, linear history

### Code Quality
- TypeScript strict mode enabled
- No any types without justification
- Comprehensive error handling
- Unit tests for critical paths

### Performance Standards
- Tick time: â‰¤7ms p50, â‰¤20ms p95
- Physics step: â‰¤5ms p50
- Memory: No leaks, efficient pooling
- Network: <800B snapshots, 20-40KB/s per client

### Testing Requirements
- Unit tests for all systems
- Integration tests for networking
- Load tests with bot harness
- Chaos testing (latency/loss injection)

### Documentation
- Update plans in `.cursor/plans/` for changes
- Document breaking changes
- Keep server_spec.md current

### Plan Management

#### Updating Plans
- **Regular Reviews**: Conduct periodic reviews of all active plans to ensure they are up-to-date and reflect current project requirements
- **Status Indicators**: Use clear status markers:
  - âœ… Done - Task/phase completed
  - ðŸš§ In Progress - Currently being worked on
  - â³ Pending - Not yet started
- **Update Requirements**: When working on features, update related plans:
  - Mark completed tasks with `[x]`
  - Update status indicators
  - Add implementation notes if needed
  - Document any deviations from plan

#### Completion Criteria
A plan is considered "finished" when:
1. All checkboxes are checked `[x]`
2. Contains completion markers ("âœ… COMPLETED", "ACHIEVED", "Ready for Production")
3. Code validation confirms features are implemented (check for related code files)
4. Manual review confirms no remaining work

#### Plan Cleanup Process
1. **Run Validation**: Use `.cursor/scripts/validate-plans.js` to identify finished plans
2. **Manual Review**: Review flagged plans to verify completion
3. **Code Verification**: Check if plan features are actually implemented in codebase
4. **Delete Finished Plans**: Remove confirmed finished plans (no archiving needed)
5. **Update Rules**: Update workflow rules if patterns change

#### Plan Lifecycle
- **Active**: Plan is being worked on or contains pending tasks
- **Review**: Plan appears finished but needs verification
- **Finished**: All criteria met, ready for deletion
- **Deleted**: Removed after confirmation

#### Best Practices
- Keep plans focused and specific
- Update plans as work progresses
- Delete finished plans promptly to reduce clutter
- Use consistent status indicators across all plans
- Link plans to related code/features when possible